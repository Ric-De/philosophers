MANUAL TESTS GLOBAL ORDERING AFTER REFACTOR

/global_order_philo_REFACTORED   main ●  ./philo 1 800 200 200
  - Philosophers: 1
  - Time to die: 800 ms
  - Time to eat: 200 ms
  - Time to sleep: 200 ms
  - Must eat: unlimited
(left_fork=0, right_fork=0)
0 1 has taken a fork
801 1 died
 ~/.../philosophers/global_order_philo_REFACTORED   main ●  timeout 2 ./philo 2 800 200 200
  - Philosophers: 2
  - Time to die: 800 ms
  - Time to eat: 200 ms
  - Time to sleep: 200 ms
  - Must eat: unlimited
(left_fork=0, right_fork=1)
(left_fork=1, right_fork=0)
0 1 has taken a fork
0 1 has taken a fork
0 1 is eating
200 1 is sleeping
200 2 has taken a fork
200 2 has taken a fork
200 2 is eating
400 1 is thinking
400 1 has taken a fork
400 1 has taken a fork
400 1 is eating
400 2 is sleeping
600 2 is thinking
600 1 is sleeping
600 2 has taken a fork
600 2 has taken a fork
600 2 is eating
800 2 is sleeping
800 1 is thinking
800 1 has taken a fork
800 1 has taken a fork
800 1 is eating
1000 1 is sleeping
1000 2 is thinking
1000 2 has taken a fork
1000 2 has taken a fork
1000 2 is eating
1200 2 is sleeping
1200 1 is thinking
1200 1 has taken a fork
1200 1 has taken a fork
1200 1 is eating
1400 1 is sleeping
1400 2 is thinking
1400 2 has taken a fork
1400 2 has taken a fork
1400 2 is eating
1600 2 is sleeping
1600 1 is thinking
1600 1 has taken a fork
1600 1 has taken a fork
1600 1 is eating
1800 1 is sleeping
1800 2 is thinking
1800 2 has taken a fork
1800 2 has taken a fork
1800 2 is eating

Test 5: Five Philosophers (CRITICAL)

3401 2 has taken a fork
3401 4 is thinking
3401 3 is sleeping
3401 2 has taken a fork
3401 2 is eating
3402 4 has taken a fork
3600 5 is sleeping
3600 1 is thinking
3600 4 has taken a fork
3600 4 is eating
3601 1 has taken a fork
3601 2 is sleeping
3601 3 is thinking
3601 1 has taken a fork
3601 1 is eating
✅ Run 10 OK


Test 6: Valgrind - Memory Leaks

/global_order_philo_REFACTORED   main ●  valgrind --leak-check=full ./philo 5 800 200 200 7
==44321== Memcheck, a memory error detector
==44321== Copyright (C) 2002-2022, and GNU GPL'd, by Julian Seward et al.
==44321== Using Valgrind-3.22.0 and LibVEX; rerun with -h for copyright info
==44321== Command: ./philo 5 800 200 200 7
==44321==
  - Philosophers: 5
  - Time to die: 800 ms
  - Time to eat: 200 ms
  - Time to sleep: 200 ms
  - Must eat: 7 times
(left_fork=0, right_fork=1)
(left_fork=1, right_fork=2)
(left_fork=2, right_fork=3)
(left_fork=3, right_fork=4)
(left_fork=4, right_fork=0)
89 4 has taken a fork
133 4 has taken a fork
134 4 is eating
135 1 has taken a fork
135 3 has taken a fork
135 2 has taken a fork
334 4 is sleeping
334 3 has taken a fork
334 3 is eating
534 4 is thinking
534 3 is sleeping
534 2 has taken a fork
534 2 is eating
535 4 has taken a fork
535 4 has taken a fork
535 4 is eating
734 3 is thinking
734 2 is sleeping
734 1 has taken a fork
734 1 is eating
735 3 has taken a fork
735 3 has taken a fork
735 3 is eating
735 4 is sleeping
801 5 died
==44321==
==44321== HEAP SUMMARY:
==44321==     in use at exit: 0 bytes in 0 blocks
==44321==   total heap usage: 9 allocs, 9 frees, 3,296 bytes allocated
==44321==
==44321== All heap blocks were freed -- no leaks are possible
==44321==
==44321== For lists of detected and suppressed errors, rerun with: -s
==44321== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
 ~/.../philosophers/global_order_philo_REFACTORED   main ● 


Test 7: Helgrind - Data Races

/global_order_philo_REFACTORED   main ●  valgrind --tool=helgrind ./philo 5 800 200 200 7
==44477== Helgrind, a thread error detector
==44477== Copyright (C) 2007-2017, and GNU GPL'd, by OpenWorks LLP et al.
==44477== Using Valgrind-3.22.0 and LibVEX; rerun with -h for copyright info
==44477== Command: ./philo 5 800 200 200 7
==44477==
  - Philosophers: 5
  - Time to die: 800 ms
  - Time to eat: 200 ms
  - Time to sleep: 200 ms
  - Must eat: 7 times
(left_fork=0, right_fork=1)
(left_fork=1, right_fork=2)
(left_fork=2, right_fork=3)
(left_fork=3, right_fork=4)
(left_fork=4, right_fork=0)
9 1 has taken a fork
11 1 has taken a fork
11 1 is eating
14 3 has taken a fork
14 3 has taken a fork
14 3 is eating
211 1 is sleeping
212 2 has taken a fork
213 5 has taken a fork
214 5 has taken a fork
214 5 is eating
215 3 is sleeping
215 2 has taken a fork
216 2 is eating
216 4 has taken a fork
413 1 is thinking
415 5 is sleeping
416 4 has taken a fork
418 4 is eating
419 3 is thinking
419 2 is sleeping
420 1 has taken a fork
420 1 has taken a fork
421 1 is eating
421 3 has taken a fork
616 5 is thinking
619 4 is sleeping
620 2 is thinking
620 3 has taken a fork
620 3 is eating
621 5 has taken a fork
621 5 has taken a fork
622 5 is eating
622 1 is sleeping
623 2 has taken a fork
819 4 is thinking
820 2 has taken a fork
821 2 is eating
822 5 is sleeping
822 3 is sleeping
823 4 has taken a fork
823 4 has taken a fork
823 4 is eating
824 1 is thinking
825 1 has taken a fork
1022 5 is thinking
1023 3 is thinking
1024 4 is sleeping
1024 1 has taken a fork
1026 1 is eating
1026 2 is sleeping
1027 3 has taken a fork
1027 3 has taken a fork
1028 3 is eating
1224 4 is thinking
1227 1 is sleeping
1228 3 is sleeping
1230 4 has taken a fork
1230 4 has taken a fork
1231 4 is eating
1231 2 is thinking
1232 5 has taken a fork
1233 2 has taken a fork
1233 2 has taken a fork
1234 2 is eating
1423 5 died
==44477==
==44477== Use --history-level=approx or =none to gain increased speed, at
==44477== the cost of reduced accuracy of conflicting-access information
==44477== For lists of detected and suppressed errors, rerun with: -s
==44477== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 10176 from 128)


Test 8: DRD - Thread Errors

/global_order_philo_REFACTORED   main ●  valgrind --tool=drd ./philo 5 800 200 200 7
==44622== drd, a thread error detector
==44622== Copyright (C) 2006-2020, and GNU GPL'd, by Bart Van Assche.
==44622== Using Valgrind-3.22.0 and LibVEX; rerun with -h for copyright info
==44622== Command: ./philo 5 800 200 200 7
==44622==
  - Philosophers: 5
  - Time to die: 800 ms
  - Time to eat: 200 ms
  - Time to sleep: 200 ms
  - Must eat: 7 times
(left_fork=0, right_fork=1)
(left_fork=1, right_fork=2)
(left_fork=2, right_fork=3)
(left_fork=3, right_fork=4)
(left_fork=4, right_fork=0)
29 1 has taken a fork
36 1 has taken a fork
36 1 is eating
41 3 has taken a fork
44 3 has taken a fork
46 3 is eating
236 5 has taken a fork
237 5 has taken a fork
238 5 is eating
238 1 is sleeping
238 2 has taken a fork
248 2 has taken a fork
248 2 is eating
248 4 has taken a fork
248 3 is sleeping
438 1 is thinking
438 5 is sleeping
439 1 has taken a fork
440 4 has taken a fork
440 4 is eating
448 1 has taken a fork
448 1 is eating
449 3 is thinking
449 2 is sleeping
450 3 has taken a fork
639 5 is thinking
640 4 is sleeping
640 3 has taken a fork
640 3 is eating
649 2 is thinking
652 1 is sleeping
659 5 has taken a fork
660 5 has taken a fork
660 5 is eating
661 2 has taken a fork
840 4 is thinking
840 3 is sleeping
841 2 has taken a fork
841 2 is eating
842 4 has taken a fork
859 1 is thinking
860 4 has taken a fork
860 4 is eating
861 1 has taken a fork
861 5 is sleeping
1041 3 is thinking
1042 1 has taken a fork
1043 1 is eating
1043 2 is sleeping
1044 3 has taken a fork
1061 4 is sleeping
1061 3 has taken a fork
1062 5 is thinking
1063 3 is eating
1243 1 is sleeping
1244 2 is thinking
1245 5 has taken a fork
1245 5 has taken a fork
1245 5 is eating
1246 2 has taken a fork
1262 4 is thinking
1263 3 is sleeping
1264 4 has taken a fork
1265 2 has taken a fork
1265 2 is eating
1444 1 is thinking
1446 1 has taken a fork
1447 4 has taken a fork
1447 4 is eating
1447 5 is sleeping
1464 3 is thinking
1465 1 has taken a fork
1466 2 is sleeping
1466 1 is eating
1467 3 has taken a fork
1647 4 is sleeping
1648 5 is thinking
1648 3 has taken a fork
1650 3 is eating
1666 2 is thinking
1667 5 has taken a fork
1668 2 has taken a fork
1669 5 has taken a fork
1669 5 is eating
1669 1 is sleeping
1848 4 is thinking
1850 2 has taken a fork
1851 2 is eating
1851 3 is sleeping
1852 4 has taken a fork
1869 5 is sleeping
1870 1 is thinking
1871 4 has taken a fork
1871 4 is eating
1872 1 has taken a fork
2052 2 is sleeping
2053 3 is thinking
2055 1 has taken a fork
2056 1 is eating
2056 3 has taken a fork
2070 5 is thinking
2072 3 has taken a fork
2073 3 is eating
2073 4 is sleeping
2253 2 is thinking
2256 1 is sleeping
2256 2 has taken a fork
2257 5 has taken a fork
2257 5 has taken a fork
2257 5 is eating
2273 4 is thinking
2273 2 has taken a fork
2274 4 has taken a fork
2274 2 is eating
2275 3 is sleeping
2456 1 is thinking
2458 5 is sleeping
2459 4 has taken a fork
2459 4 is eating
2460 1 has taken a fork
2475 3 is thinking
2476 1 has taken a fork
2476 1 is eating
2477 2 is sleeping
2477 3 has taken a fork
2659 5 is thinking
2660 3 has taken a fork
2660 3 is eating
2661 4 is sleeping
2677 2 is thinking
2677 5 has taken a fork
2678 5 has taken a fork
2678 5 is eating
2678 2 has taken a fork
2679 1 is sleeping
2861 4 is thinking
2861 2 has taken a fork
2861 2 is eating
2862 4 has taken a fork
2863 3 is sleeping
2878 5 is sleeping
2878 4 has taken a fork
2878 4 is eating
2879 1 is thinking
2880 1 has taken a fork
3062 2 is sleeping
3063 1 has taken a fork
3063 1 is eating
3064 3 is thinking
3066 3 has taken a fork
3078 5 is thinking
3079 4 is sleeping
3080 3 has taken a fork
3081 3 is eating
3262 2 is thinking
3264 5 has taken a fork
3264 5 has taken a fork
3265 2 has taken a fork
3265 1 is sleeping
3265 5 is eating
3279 4 is thinking
3282 2 has taken a fork
3282 2 is eating
3282 4 has taken a fork
3283 3 is sleeping
3465 1 is thinking
3466 4 has taken a fork
3467 4 is eating
3468 1 has taken a fork
3468 5 is sleeping
3482 2 is sleeping
3482 1 has taken a fork
3483 1 is eating
3484 3 is thinking
3485 3 has taken a fork
3668 5 is thinking
3668 4 is sleeping
3669 3 has taken a fork
==44622==
==44622== For lists of detected and suppressed errors, rerun with: -s
==44622== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 13 from 5)


Test 9: Variance Check


/global_order_philo_REFACTORED   main ●  for i in {1..5}; do
    count=$(./philo 9 600 200 200 7 | grep -c "is eating")
    echo "Run $i: $count meals"
done
Run 1: 67 meals
Run 2: 66 meals
Run 3: 67 meals
Run 4: 67 meals
Run 5: 67 meals
 ~/.../philosophers/global_order_philo_REFACTORED   main ●  for i in {1..5}; do
    count=$(./philo 9 600 200 200 7 | grep -c "is eating")
    echo "Run $i: $count meals"
done
Run 1: 67 meals
Run 2: 68 meals
Run 3: 67 meals
Run 4: 68 meals
Run 5: 67 meals
 ~/.../philosophers/global_order_philo_REFACTORED   main ●  for i in {1..5}; do
    count=$(./philo 8 600 200 200 7 | grep -c "is eating")
    echo "Run $i: $count meals"
done
Run 1: 24 meals
Run 2: 21 meals
Run 3: 15 meals
Run 4: 60 meals
Run 5: 60 meals
 ~/.../philosophers/global_order_philo_REFACTORED   main ●  for i in {1..5}; do
    count=$(./philo 8 600 200 200 7 | grep -c "is eating")
    echo "Run $i: $count meals"
done
Run 1: 63 meals
Run 2: 62 meals
Run 3: 60 meals
Run 4: 58 meals
Run 5: 62 meals
 ~/.../philosophers/global_order_philo_REFACTORED   main ●  for i in {1..5}; do
    count=$(./philo 8 600 200 200 7 | grep -c "is eating")
    echo "Run $i: $count meals"
done
Run 1: 60 meals
Run 2: 60 meals
Run 3: 60 meals
Run 4: 60 meals
Run 5: 60 meals
 ~/.../philosophers/global_order_philo_REFACTORED   main ●  for i in {1..5}; do
    count=$(./philo 8 600 200 200 7 | grep -c "is eating")
    echo "Run $i: $count meals"
done
Run 1: 60 meals
Run 2: 63 meals
Run 3: 60 meals
Run 4: 60 meals
Run 5: 62 meals
 ~/.../philosophers/global_order_philo_REFACTORED   main ●  for i in {1..5}; do
    count=$(./philo 8 600 200 200 7 | grep -c "is eating")
    echo "Run $i: $count meals"
done
Run 1: 60 meals
Run 2: 60 meals
Run 3: 60 meals
Run 4: 12 meals
Run 5: 60 meals
 ~/.../philosophers/global_order_philo_REFACTORED   main ●  for i in {1..5}; do
    count=$(./philo 8 600 200 200 7 | grep -c "is eating")
    echo "Run $i: $count meals"
done
Run 1: 60 meals
Run 2: 9 meals
Run 3: 60 meals
Run 4: 60 meals
Run 5: 60 meals
 ~/.../philosophers/global_order_philo_REFACTORED   main ●  for i in {1..5}; do
    count=$(./philo 9 600 200 200 7 | grep -c "is eating")
    echo "Run $i: $count meals"
done
Run 1: 67 meals
Run 2: 69 meals
Run 3: 67 meals
Run 4: 67 meals
Run 5: 67 meals
 ~/.../philosophers/global_order_philo_REFACTORED   main ●  for i in {1..5}; do
    count=$(./philo 9 600 200 200 7 | grep -c "is eating")
    echo "Run $i: $count meals"
done
Run 1: 67 meals
Run 2: 67 meals
Run 3: 67 meals
Run 4: 67 meals
Run 5: 67 meals
 ~/.../philosophers/global_order_philo_REFACTORED   main ● 


Notice that some times it get crazy and goes very low...




