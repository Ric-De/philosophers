PHILO NEW Improvement rebuild TESTS




/philo_rebuild   main ●  ./philo 1 800 200 200
  - Philosophers: 1
  - Time to die: 800 ms
  - Time to eat: 200 ms
  - Time to sleep: 200 ms
  - Must eat: unlimited
0 1 has taken a fork
801 1 died
 ~/.../philosophers/philo_rebuild   main ●  ./philo 4 310 200 100
  - Philosophers: 4
  - Time to die: 310 ms
  - Time to eat: 200 ms
  - Time to sleep: 100 ms
  - Must eat: unlimited
0 1 has taken a fork
0 1 has taken a fork
0 1 is eating
0 3 has taken a fork
0 3 has taken a fork
0 3 is eating
200 3 is sleeping
200 2 has taken a fork
200 4 has taken a fork
200 4 has taken a fork
200 4 is eating
200 2 has taken a fork
200 2 is eating
200 1 is sleeping
300 3 is thinking
300 1 is thinking
312 1 died
 ~/.../philosophers/philo_rebuild   main ●  for i in {1..10}; do ./philo 8 800 20
0 200 7 | grep "is eating" | wc -l; done
60
60
60
60
60
60
60
60
60
60
 ~/.../philosophers/philo_rebuild   main ●  for i in {1..10}; do ./philo 9 800 20
0 200 7 | grep "is eating" | wc -l; done
68
68
68
68
68
68
68
68
68
68
 ~/.../philosophers/philo_rebuild   main ●  for i in {1..10}; do ./philo 7 800 20
0 200 7 | grep "is eating" | wc -l; done
54
54
54
54
54
54
54
54
54
54
 ~/.../philosophers/philo_rebuild   main ●  for i in {1..10}; do ./philo 11 800 2
00 200 7 | grep "is eating" | wc -l; done
85
85
85
85
85
85
85
85
85
85
 ~/.../philosophers/philo_rebuild   main ● 



------------------------------------------------------
-------------------------------------------------------

VALGRIND TESTS


/philo_rebuild   main ●  valgrind --leak-check=full ./philo 5 800 200 200 7
==31904== Memcheck, a memory error detector
==31904== Copyright (C) 2002-2022, and GNU GPL'd, by Julian Seward et al.
==31904== Using Valgrind-3.22.0 and LibVEX; rerun with -h for copyright info
==31904== Command: ./philo 5 800 200 200 7
==31904==
  - Philosophers: 5
  - Time to die: 800 ms
  - Time to eat: 200 ms
  - Time to sleep: 200 ms
  - Must eat: 7 times
143 1 has taken a fork
145 1 has taken a fork
150 1 is eating
151 3 has taken a fork
152 3 has taken a fork
152 3 is eating
339 4 has taken a fork
351 1 is sleeping
351 5 has taken a fork
352 3 is sleeping
352 4 has taken a fork
352 4 is eating
352 2 has taken a fork
353 2 has taken a fork
353 2 is eating
551 1 is thinking
552 3 is thinking
552 4 is sleeping
552 3 has taken a fork
552 5 has taken a fork
552 5 is eating
553 2 is sleeping
553 3 has taken a fork
553 3 is eating
553 1 has taken a fork
752 4 is thinking
752 4 has taken a fork
752 5 is sleeping
752 1 has taken a fork
752 1 is eating
753 3 is sleeping
753 4 has taken a fork
753 2 is thinking
753 2 has taken a fork
753 4 is eating
952 5 is thinking
952 5 has taken a fork
952 2 has taken a fork
952 2 is eating
952 1 is sleeping
953 4 is sleeping
953 5 has taken a fork
953 5 is eating
953 3 is thinking
953 3 has taken a fork
1152 1 is thinking
1152 1 has taken a fork
1152 2 is sleeping
1152 3 has taken a fork
1152 3 is eating
1153 4 is thinking
1153 4 has taken a fork
1153 5 is sleeping
1153 1 has taken a fork
1153 1 is eating
1352 3 is sleeping
1352 4 has taken a fork
1352 4 is eating
1352 2 is thinking
1352 2 has taken a fork
1353 5 is thinking
1353 5 has taken a fork
1353 2 has taken a fork
1353 2 is eating
1353 1 is sleeping
1552 3 is thinking
1552 3 has taken a fork
1552 4 is sleeping
1552 5 has taken a fork
1552 5 is eating
1553 2 is sleeping
1553 3 has taken a fork
1553 3 is eating
1555 1 is thinking
1555 1 has taken a fork
1752 4 is thinking
1752 5 is sleeping
1752 1 has taken a fork
1752 1 is eating
1752 4 has taken a fork
1753 2 is thinking
1753 2 has taken a fork
1753 4 has taken a fork
1753 4 is eating
1753 3 is sleeping
1952 5 is thinking
1952 2 has taken a fork
1952 2 is eating
1952 5 has taken a fork
1952 1 is sleeping
1953 3 is thinking
1953 4 is sleeping
1953 3 has taken a fork
1953 5 has taken a fork
1953 5 is eating
2152 2 is sleeping
2152 1 is thinking
2152 1 has taken a fork
2152 3 has taken a fork
2152 3 is eating
2153 4 is thinking
2153 4 has taken a fork
2153 5 is sleeping
2153 1 has taken a fork
2153 1 is eating
2352 3 is sleeping
2352 4 has taken a fork
2352 4 is eating
2352 2 is thinking
2352 2 has taken a fork
2353 1 is sleeping
2353 5 is thinking
2353 5 has taken a fork
2353 2 has taken a fork
2353 2 is eating
2552 4 is sleeping
2552 3 is thinking
2552 3 has taken a fork
2552 5 has taken a fork
2552 5 is eating
2553 2 is sleeping
2553 3 has taken a fork
2553 3 is eating
2553 1 is thinking
2553 1 has taken a fork
2752 4 is thinking
2752 4 has taken a fork
2752 5 is sleeping
2752 1 has taken a fork
2752 1 is eating
2753 2 is thinking
2753 2 has taken a fork
2753 4 has taken a fork
2753 4 is eating
2753 3 is sleeping
2952 1 is sleeping
2952 2 has taken a fork
2952 2 is eating
2952 5 is thinking
2952 5 has taken a fork
2953 3 is thinking
2953 3 has taken a fork
2953 4 is sleeping
2953 5 has taken a fork
2953 5 is eating
3152 1 is thinking
3152 1 has taken a fork
3152 2 is sleeping
3152 3 has taken a fork
3152 3 is eating
3153 4 is thinking
3153 5 is sleeping
3153 1 has taken a fork
3153 4 has taken a fork
3154 1 is eating
3352 2 is thinking
3352 2 has taken a fork
3352 3 is sleeping
3352 4 has taken a fork
3352 4 is eating
3353 5 is thinking
3354 5 has taken a fork
3354 1 is sleeping
3355 2 has taken a fork
3355 2 is eating
3552 4 is sleeping
3552 3 is thinking
3552 3 has taken a fork
3552 5 has taken a fork
3552 5 is eating
3555 1 is thinking
3555 1 has taken a fork
3555 3 has taken a fork
3555 3 is eating
3555 2 is sleeping
3752 4 is thinking
3752 4 has taken a fork
3752 5 is sleeping
==31904==
==31904== HEAP SUMMARY:
==31904==     in use at exit: 0 bytes in 0 blocks
==31904==   total heap usage: 9 allocs, 9 frees, 3,536 bytes allocated
==31904==
==31904== All heap blocks were freed -- no leaks are possible
==31904==
==31904== For lists of detected and suppressed errors, rerun with: -s
==31904== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
 ~/.../philosophers/philo_rebuild   main ● 


-----------------------------------------------------------------------------------

# Helgrind - should show 0 data races


/philo_rebuild   main ●  valgrind --tool=helgrind ./philo 5 800 200 200 7
==31976== Helgrind, a thread error detector
==31976== Copyright (C) 2007-2017, and GNU GPL'd, by OpenWorks LLP et al.
==31976== Using Valgrind-3.22.0 and LibVEX; rerun with -h for copyright info
==31976== Command: ./philo 5 800 200 200 7
==31976==
  - Philosophers: 5
  - Time to die: 800 ms
  - Time to eat: 200 ms
  - Time to sleep: 200 ms
  - Must eat: 7 times
9 1 has taken a fork
12 1 has taken a fork
13 1 is eating
13 3 has taken a fork
14 3 has taken a fork
19 3 is eating
204 4 has taken a fork
213 1 is sleeping
214 5 has taken a fork
219 3 is sleeping
219 2 has taken a fork
219 2 has taken a fork
220 4 has taken a fork
220 4 is eating
220 2 is eating
414 1 is thinking
419 3 is thinking
420 2 is sleeping
420 4 is sleeping
420 3 has taken a fork
==31976== ---Thread-Announcement------------------------------------------
==31976==
==31976== Thread #6 was created
==31976==    at 0x4995A53: clone (clone.S:76)
==31976==    by 0x4995BD2: __clone_internal_fallback (clone-internal.c:64)
==31976==    by 0x4995BD2: __clone_internal (clone-internal.c:109)
==31976==    by 0x490854F: create_thread (pthread_create.c:297)
==31976==    by 0x49091A4: pthread_create@@GLIBC_2.34 (pthread_create.c:836)
==31976==    by 0x4854975: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A056: create_threads (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x1093C9: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==
==31976== ----------------------------------------------------------------
==31976==
==31976== Thread #6: lock order "0x4A81520 before 0x4A81480" violated
==31976==
==31976== Observed (incorrect) order is: acquisition of lock at 0x4A81480
==31976==    at 0x48512DC: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A200: take_right_fork (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A2D1: take_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A349: philo_eat (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109F89: philosopher_routine (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x4854B7A: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x4908AA3: start_thread (pthread_create.c:447)
==31976==    by 0x4995A63: clone (clone.S:100)
==31976==
==31976==  followed by a later acquisition of lock at 0x4A81520
==31976==    at 0x48512DC: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A264: take_left_fork (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A2E8: take_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A349: philo_eat (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109F89: philosopher_routine (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x4854B7A: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x4908AA3: start_thread (pthread_create.c:447)
==31976==    by 0x4995A63: clone (clone.S:100)
==31976==
==31976==  Lock at 0x4A81520 was first observed
==31976==    at 0x48562EB: pthread_mutex_init (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x109992: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Address 0x4a81520 is 160 bytes inside a block of size 200 alloc'd
==31976==    at 0x48488A8: malloc (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10992F: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Block was alloc'd by thread #1
==31976==
==31976==  Lock at 0x4A81480 was first observed
==31976==    at 0x48562EB: pthread_mutex_init (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x109992: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Address 0x4a81480 is 0 bytes inside a block of size 200 alloc'd
==31976==    at 0x48488A8: malloc (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10992F: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Block was alloc'd by thread #1
==31976==
==31976==
==31976== ---Thread-Announcement------------------------------------------
==31976==
==31976== Thread #4 was created
==31976==    at 0x4995A53: clone (clone.S:76)
==31976==    by 0x4995BD2: __clone_internal_fallback (clone-internal.c:64)
==31976==    by 0x4995BD2: __clone_internal (clone-internal.c:109)
==31976==    by 0x490854F: create_thread (pthread_create.c:297)
==31976==    by 0x49091A4: pthread_create@@GLIBC_2.34 (pthread_create.c:836)
==31976==    by 0x4854975: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A056: create_threads (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x1093C9: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==
==31976== ----------------------------------------------------------------
==31976==
==31976== Thread #4: lock order "0x4A814D0 before 0x4A814F8" violated
==31976==
==31976== Observed (incorrect) order is: acquisition of lock at 0x4A814F8
==31976==    at 0x48512DC: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A200: take_right_fork (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A2D1: take_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A349: philo_eat (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109F89: philosopher_routine (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x4854B7A: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x4908AA3: start_thread (pthread_create.c:447)
==31976==    by 0x4995A63: clone (clone.S:100)
==31976==
==31976==  followed by a later acquisition of lock at 0x4A814D0
==31976==    at 0x48512DC: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A264: take_left_fork (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A2E8: take_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A349: philo_eat (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109F89: philosopher_routine (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x4854B7A: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x4908AA3: start_thread (pthread_create.c:447)
==31976==    by 0x4995A63: clone (clone.S:100)
==31976==
==31976==  Lock at 0x4A814D0 was first observed
==31976==    at 0x48562EB: pthread_mutex_init (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x109992: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Address 0x4a814d0 is 80 bytes inside a block of size 200 alloc'd
==31976==    at 0x48488A8: malloc (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10992F: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Block was alloc'd by thread #1
==31976==
==31976==  Lock at 0x4A814F8 was first observed
==31976==    at 0x48562EB: pthread_mutex_init (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x109992: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Address 0x4a814f8 is 120 bytes inside a block of size 200 alloc'd
==31976==    at 0x48488A8: malloc (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10992F: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Block was alloc'd by thread #1
==31976==
==31976==
422 3 has taken a fork
422 3 is eating
422 5 has taken a fork
422 5 is eating
422 1 has taken a fork
620 2 is thinking
620 4 is thinking
622 4 has taken a fork
==31976== ---Thread-Announcement------------------------------------------
==31976==
==31976== Thread #2 was created
==31976==    at 0x4995A53: clone (clone.S:76)
==31976==    by 0x4995BD2: __clone_internal_fallback (clone-internal.c:64)
==31976==    by 0x4995BD2: __clone_internal (clone-internal.c:109)
==31976==    by 0x490854F: create_thread (pthread_create.c:297)
==31976==    by 0x49091A4: pthread_create@@GLIBC_2.34 (pthread_create.c:836)
==31976==    by 0x4854975: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A056: create_threads (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x1093C9: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==
==31976== ----------------------------------------------------------------
==31976==
==31976== Thread #2: lock order "0x4A81480 before 0x4A814A8" violated
==31976==
==31976== Observed (incorrect) order is: acquisition of lock at 0x4A814A8
==31976==    at 0x48512DC: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A200: take_right_fork (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A2D1: take_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A349: philo_eat (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109F89: philosopher_routine (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x4854B7A: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x4908AA3: start_thread (pthread_create.c:447)
==31976==    by 0x4995A63: clone (clone.S:100)
==31976==
==31976==  followed by a later acquisition of lock at 0x4A81480
==31976==    at 0x48512DC: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A264: take_left_fork (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A2E8: take_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A349: philo_eat (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109F89: philosopher_routine (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x4854B7A: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x4908AA3: start_thread (pthread_create.c:447)
==31976==    by 0x4995A63: clone (clone.S:100)
==31976==
==31976==  Lock at 0x4A81480 was first observed
==31976==    at 0x48562EB: pthread_mutex_init (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x109992: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Address 0x4a81480 is 0 bytes inside a block of size 200 alloc'd
==31976==    at 0x48488A8: malloc (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10992F: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Block was alloc'd by thread #1
==31976==
==31976==  Lock at 0x4A814A8 was first observed
==31976==    at 0x48562EB: pthread_mutex_init (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x109992: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Address 0x4a814a8 is 40 bytes inside a block of size 200 alloc'd
==31976==    at 0x48488A8: malloc (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10992F: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Block was alloc'd by thread #1
==31976==
==31976==
624 1 has taken a fork
624 1 is eating
624 2 has taken a fork
==31976== ---Thread-Announcement------------------------------------------
==31976==
==31976== Thread #5 was created
==31976==    at 0x4995A53: clone (clone.S:76)
==31976==    by 0x4995BD2: __clone_internal_fallback (clone-internal.c:64)
==31976==    by 0x4995BD2: __clone_internal (clone-internal.c:109)
==31976==    by 0x490854F: create_thread (pthread_create.c:297)
==31976==    by 0x49091A4: pthread_create@@GLIBC_2.34 (pthread_create.c:836)
==31976==    by 0x4854975: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A056: create_threads (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x1093C9: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==
==31976== ----------------------------------------------------------------
==31976==
==31976== Thread #5: lock order "0x4A814F8 before 0x4A81520" violated
==31976==
==31976== Observed (incorrect) order is: acquisition of lock at 0x4A81520
==31976==    at 0x48512DC: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A200: take_right_fork (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A2D1: take_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A349: philo_eat (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109F89: philosopher_routine (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x4854B7A: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x4908AA3: start_thread (pthread_create.c:447)
==31976==    by 0x4995A63: clone (clone.S:100)
==31976==
==31976==  followed by a later acquisition of lock at 0x4A814F8
==31976==    at 0x48512DC: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A264: take_left_fork (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A2E8: take_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A349: philo_eat (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109F89: philosopher_routine (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x4854B7A: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x4908AA3: start_thread (pthread_create.c:447)
==31976==    by 0x4995A63: clone (clone.S:100)
==31976==
==31976==  Lock at 0x4A814F8 was first observed
==31976==    at 0x48562EB: pthread_mutex_init (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x109992: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Address 0x4a814f8 is 120 bytes inside a block of size 200 alloc'd
==31976==    at 0x48488A8: malloc (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10992F: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Block was alloc'd by thread #1
==31976==
==31976==  Lock at 0x4A81520 was first observed
==31976==    at 0x48562EB: pthread_mutex_init (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x109992: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Address 0x4a81520 is 160 bytes inside a block of size 200 alloc'd
==31976==    at 0x48488A8: malloc (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10992F: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Block was alloc'd by thread #1
==31976==
==31976==
626 5 is sleeping
626 4 has taken a fork
626 4 is eating
627 3 is sleeping
825 1 is sleeping
==31976== ---Thread-Announcement------------------------------------------
==31976==
==31976== Thread #3 was created
==31976==    at 0x4995A53: clone (clone.S:76)
==31976==    by 0x4995BD2: __clone_internal_fallback (clone-internal.c:64)
==31976==    by 0x4995BD2: __clone_internal (clone-internal.c:109)
==31976==    by 0x490854F: create_thread (pthread_create.c:297)
==31976==    by 0x49091A4: pthread_create@@GLIBC_2.34 (pthread_create.c:836)
==31976==    by 0x4854975: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A056: create_threads (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x1093C9: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==
==31976== ----------------------------------------------------------------
==31976==
==31976== Thread #3: lock order "0x4A814A8 before 0x4A814D0" violated
==31976==
==31976== Observed (incorrect) order is: acquisition of lock at 0x4A814D0
==31976==    at 0x48512DC: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A200: take_right_fork (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A2D1: take_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A349: philo_eat (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109F89: philosopher_routine (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x4854B7A: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x4908AA3: start_thread (pthread_create.c:447)
==31976==    by 0x4995A63: clone (clone.S:100)
==31976==
==31976==  followed by a later acquisition of lock at 0x4A814A8
==31976==    at 0x48512DC: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10A264: take_left_fork (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A2E8: take_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10A349: philo_eat (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109F89: philosopher_routine (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x4854B7A: ??? (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x4908AA3: start_thread (pthread_create.c:447)
==31976==    by 0x4995A63: clone (clone.S:100)
==31976==
==31976==  Lock at 0x4A814A8 was first observed
==31976==    at 0x48562EB: pthread_mutex_init (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x109992: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Address 0x4a814a8 is 40 bytes inside a block of size 200 alloc'd
==31976==    at 0x48488A8: malloc (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10992F: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Block was alloc'd by thread #1
==31976==
==31976==  Lock at 0x4A814D0 was first observed
==31976==    at 0x48562EB: pthread_mutex_init (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x109992: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Address 0x4a814d0 is 80 bytes inside a block of size 200 alloc'd
==31976==    at 0x48488A8: malloc (in /usr/libexec/valgrind/vgpreload_helgrind-amd64-linux.so)
==31976==    by 0x10992F: init_forks (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x109D87: init_data (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==    by 0x10932E: main (in /home/ricde/Documents/c_programming/3_circle/philosophers/philo_rebuild/philo)
==31976==  Block was alloc'd by thread #1
==31976==
==31976==
826 2 has taken a fork
827 2 is eating
828 3 is thinking
829 5 is thinking
829 5 has taken a fork
829 3 has taken a fork
830 4 is sleeping
830 5 has taken a fork
830 5 is eating
1025 1 is thinking
1027 2 is sleeping
1029 1 has taken a fork
1029 3 has taken a fork
1029 3 is eating
1030 4 is thinking
1031 4 has taken a fork
1031 5 is sleeping
1031 1 has taken a fork
1031 1 is eating
1228 2 is thinking
1229 2 has taken a fork
1230 3 is sleeping
1230 4 has taken a fork
1231 4 is eating
1231 5 is thinking
1232 5 has taken a fork
1232 1 is sleeping
1232 2 has taken a fork
1233 2 is eating
1430 3 is thinking
1431 3 has taken a fork
1432 4 is sleeping
1433 5 has taken a fork
1433 5 is eating
1433 3 has taken a fork
1434 3 is eating
1434 1 is thinking
1434 1 has taken a fork
1434 2 is sleeping
1633 5 is sleeping
1633 4 is thinking
1634 2 is thinking
1634 2 has taken a fork
1634 4 has taken a fork
1635 4 has taken a fork
1635 4 is eating
1635 1 has taken a fork
1635 1 is eating
1636 3 is sleeping
1833 5 is thinking
1835 4 is sleeping
1836 3 is thinking
1836 3 has taken a fork
1839 1 is sleeping
1839 2 has taken a fork
1839 2 is eating
1840 5 has taken a fork
1840 5 has taken a fork
1840 5 is eating
2035 4 is thinking
2039 1 is thinking
2040 2 is sleeping
2040 1 has taken a fork
2041 3 has taken a fork
2041 3 is eating
2042 1 has taken a fork
2042 1 is eating
2043 4 has taken a fork
2044 5 is sleeping
2240 2 is thinking
2242 3 is sleeping
2243 4 has taken a fork
2243 4 is eating
2245 1 is sleeping
2245 5 is thinking
2245 5 has taken a fork
2246 2 has taken a fork
2246 2 has taken a fork
2246 2 is eating
2442 3 is thinking
2445 1 is thinking
2445 4 is sleeping
2445 5 has taken a fork
2445 5 is eating
2446 3 has taken a fork
2446 2 is sleeping
2446 1 has taken a fork
2447 3 has taken a fork
2447 3 is eating
2645 4 is thinking
2646 2 is thinking
2647 5 is sleeping
2647 4 has taken a fork
2647 1 has taken a fork
2648 1 is eating
2649 3 is sleeping
2649 4 has taken a fork
2650 2 has taken a fork
2651 4 is eating
2847 5 is thinking
2849 3 is thinking
2850 5 has taken a fork
2850 2 has taken a fork
2851 2 is eating
2851 3 has taken a fork
2852 1 is sleeping
2852 5 has taken a fork
2852 5 is eating
2853 4 is sleeping
3052 1 is thinking
3052 1 has taken a fork
3053 2 is sleeping
3053 1 has taken a fork
3053 1 is eating
3054 5 is sleeping
3054 3 has taken a fork
3055 4 is thinking
3055 4 has taken a fork
3056 3 is eating
3253 2 is thinking
3254 1 is sleeping
3254 5 is thinking
3254 5 has taken a fork
3256 2 has taken a fork
3256 2 has taken a fork
3256 4 has taken a fork
3257 4 is eating
3257 2 is eating
3257 3 is sleeping
3454 1 is thinking
3457 3 is thinking
3457 1 has taken a fork
3457 3 has taken a fork
3458 3 has taken a fork
3458 3 is eating
3458 2 is sleeping
3459 4 is sleeping
3459 5 has taken a fork
3459 5 is eating
3658 3 is sleeping
3659 4 is thinking
3659 5 is sleeping
3659 1 has taken a fork
3660 1 is eating
3660 4 has taken a fork
3660 4 has taken a fork
3661 2 is thinking
3661 2 has taken a fork
3661 4 is eating
==31976==
==31976== Use --history-level=approx or =none to gain increased speed, at
==31976== the cost of reduced accuracy of conflicting-access information
==31976== For lists of detected and suppressed errors, rerun with: -s
==31976== ERROR SUMMARY: 35 errors from 5 contexts (suppressed: 22776 from 113)
 ~/.../philosophers/philo_rebuild   main ● 





---------------------------------------------------------
----------------------------------------------------------
--------------------------------------------------------


# DRD - should show 0 data races


/philo_rebuild   main ●  valgrind --tool=drd ./philo 5 800 200 200 7
==32045== drd, a thread error detector
==32045== Copyright (C) 2006-2020, and GNU GPL'd, by Bart Van Assche.
==32045== Using Valgrind-3.22.0 and LibVEX; rerun with -h for copyright info
==32045== Command: ./philo 5 800 200 200 7
==32045==
  - Philosophers: 5
  - Time to die: 800 ms
  - Time to eat: 200 ms
  - Time to sleep: 200 ms
  - Must eat: 7 times
26 1 has taken a fork
33 1 has taken a fork
38 1 is eating
39 3 has taken a fork
41 3 has taken a fork
41 3 is eating
233 4 has taken a fork
239 1 is sleeping
240 5 has taken a fork
241 3 is sleeping
242 2 has taken a fork
242 2 has taken a fork
243 4 has taken a fork
243 2 is eating
243 4 is eating
440 1 is thinking
442 3 is thinking
443 4 is sleeping
443 5 has taken a fork
443 5 is eating
444 3 has taken a fork
444 1 has taken a fork
445 3 has taken a fork
445 2 is sleeping
446 3 is eating
643 4 is thinking
643 4 has taken a fork
644 5 is sleeping
645 1 has taken a fork
645 1 is eating
646 2 is thinking
646 2 has taken a fork
647 3 is sleeping
647 4 has taken a fork
647 4 is eating
844 5 is thinking
845 5 has taken a fork
845 1 is sleeping
846 2 has taken a fork
846 2 is eating
847 5 has taken a fork
847 4 is sleeping
848 3 is thinking
848 3 has taken a fork
848 5 is eating
1046 1 is thinking
1046 1 has taken a fork
1047 2 is sleeping
1048 5 is sleeping
1048 4 is thinking
1048 3 has taken a fork
1049 3 is eating
1049 4 has taken a fork
1049 1 has taken a fork
1050 1 is eating
1248 2 is thinking
1248 5 is thinking
1249 3 is sleeping
1249 2 has taken a fork
1250 4 has taken a fork
1250 4 is eating
1250 1 is sleeping
1251 5 has taken a fork
1251 2 has taken a fork
1252 2 is eating
1449 3 is thinking
1450 3 has taken a fork
1451 4 is sleeping
1451 5 has taken a fork
1451 5 is eating
1452 1 is thinking
1452 1 has taken a fork
1453 2 is sleeping
1453 3 has taken a fork
1453 3 is eating
1651 4 is thinking
1652 4 has taken a fork
1653 2 is thinking
1653 5 is sleeping
1654 1 has taken a fork
1654 1 is eating
1655 3 is sleeping
1655 4 has taken a fork
1656 2 has taken a fork
1656 4 is eating
1854 5 is thinking
1855 3 is thinking
1855 5 has taken a fork
1856 1 is sleeping
1857 2 has taken a fork
1858 4 is sleeping
1858 5 has taken a fork
1858 2 is eating
1859 3 has taken a fork
1859 5 is eating
2057 1 is thinking
2058 4 is thinking
2059 1 has taken a fork
2060 2 is sleeping
2060 3 has taken a fork
2061 3 is eating
2061 4 has taken a fork
2061 1 has taken a fork
2062 1 is eating
2062 5 is sleeping
2260 2 is thinking
2261 3 is sleeping
2262 4 has taken a fork
2263 4 is eating
2263 1 is sleeping
2264 5 is thinking
2264 5 has taken a fork
2265 2 has taken a fork
2265 2 has taken a fork
2265 2 is eating
2462 3 is thinking
2463 1 is thinking
2463 4 is sleeping
2464 5 has taken a fork
2465 1 has taken a fork
2465 5 is eating
2466 3 has taken a fork
2466 3 has taken a fork
2466 3 is eating
2467 2 is sleeping
2664 4 is thinking
2666 4 has taken a fork
2667 3 is sleeping
2668 5 is sleeping
2668 1 has taken a fork
2669 1 is eating
2669 2 is thinking
2669 4 has taken a fork
2669 4 is eating
2670 2 has taken a fork
2868 5 is thinking
2868 3 is thinking
2869 5 has taken a fork
2870 1 is sleeping
2871 3 has taken a fork
2871 2 has taken a fork
2871 2 is eating
2872 5 has taken a fork
2872 5 is eating
2872 4 is sleeping
3071 1 is thinking
3073 1 has taken a fork
3074 1 has taken a fork
3074 1 is eating
3075 2 is sleeping
3076 4 is thinking
3076 4 has taken a fork
3077 3 has taken a fork
3078 5 is sleeping
3080 3 is eating
3275 1 is sleeping
3276 2 is thinking
3280 5 is thinking
3280 5 has taken a fork
3281 2 has taken a fork
3281 2 has taken a fork
3281 2 is eating
3282 4 has taken a fork
3282 4 is eating
3282 3 is sleeping
3476 1 is thinking
3482 2 is sleeping
3483 3 is thinking
3483 3 has taken a fork
3483 3 has taken a fork
3484 3 is eating
3484 4 is sleeping
3485 5 has taken a fork
3486 5 is eating
3486 1 has taken a fork
3683 2 is thinking
3685 2 has taken a fork
3686 3 is sleeping
3688 4 is thinking
3689 4 has taken a fork
3690 4 has taken a fork
3690 4 is eating
3691 1 has taken a fork
3691 1 is eating
3692 5 is sleeping
==32045==
==32045== For lists of detected and suppressed errors, rerun with: -s
==32045== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 13 from 5)
 ~/.../philosophers/philo_rebuild   main ● 



----------------------------------
----------------------------------------
-------------------------------------------------



